# Base Dockerfile for all services
FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY package*.json ./
COPY tsconfig.base.json ./
COPY libs ./libs

# Install root dependencies
RUN npm install

# Build shared libraries
WORKDIR /app/libs/common
RUN npm install || true

WORKDIR /app/libs/dto
RUN npm install || true

WORKDIR /app/libs/events
RUN npm install || true

WORKDIR /app
